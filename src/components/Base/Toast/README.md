# 📮 Toast Component

토스트 컴포넌트는 메시지를 알려줄 수 있는 컴포넌트입니다.
**성공, 에러, 경고, 기본 정보**에 대한 타입을 제공합니다.

최대한 일관성 있는 아이콘으로 제공하고 있으며, 이에 대한 커스터마이제이션은 아직 **미구현** 상태입니다.

## 사용법

### 전역 스토어를 통해 토스트를 체크하는 구조

### 🚨 주의! Vue 3 + Pinia에서 사용 가능합니다.

`Vue 3`로 시작한 프로젝트이기 때문에, `Vue 2`와 호환이 되지 않을 가능성이 매우 높습니다.  
`Pinia`의 이유는 시작 배경이 존재합니다.

#### 이벤트 버스 vs 전역 상태 관리

`Pinia`는 `Vue 3`부터 전폭적으로 지지를 받고 있는 전역 상태 관리 라이브러리입니다.  
사용법은 마치 `recoil`과 비슷하며, 에러를 쉽게 추적할 수 있다는 점 역시 매력적인 라이브러리죠.

반면 이벤트 버스는 `Vue 3` 부터는 지원을 덜 받는 상태이며, 최대한 사용을 자제하는 편입니다.  
이는 [다음 글](https://v3-migration.vuejs.org/breaking-changes/events-api.html#migration-strategy)에서 확인이 가능합니다.

음, 그렇다면 제 인지의 흐름은 다음 2가지로 좁혀졌습니다.

**커스텀 이벤트**와 **Pinia** 였습니다.

#### 왜 커스텀 이벤트를 사용하지 않았는가?

간단합니다. **Pinia**의 코드가 더 깔끔했기 때문입니다.  
또한, 이미 Vue 3에서 Pinia를 전폭적으로 지원하기 때문에, 굳이 다른 전역 라이브러리를 고려해야 할까?라는 생각 역시 존재했습니다.

마지막으로, 전역 상태 관리 라이브러리는 리덕스 이후로 점차 구현의 복잡도를 줄이는 추세입니다.  
`recoil`, `jotai`, `zustand`가 그것이죠.

> ### 따라서 이러한 이유로 인해 `Pinia`를 통해 생성과 삭제를 관리하게 됐습니다.

---

### 타입

토스트 타입은 다음과 같으며, 이를 따라야 합니다.

```js
interface ToastPropsType {
  type: ToastType;
  content: string;
  showTime: number;
  toastStyle: ToastStyletype;
}
```

### 스토어 생성

스토어는 다음과 같이 생성하며, 여기서 `addToast`와 `removeToast`를 할 수 있습니다.
보내는 `arguments`는 `Toast`입니다.

이해를 돕기 위해 스토리북에 있는 예시를 가져왔습니다.

```js
const toastStore = useToastStore();
const id = ref(0);

const onClick = () => {
  toastStore.addToast({
    type: 'warning',
    id: `${id.value}`,
    content: `
      버튼을 ${id.value}번 클릭하셨어요.
      그런데 말이죠. 만약에 이렇게 에러 메시지가 길어버리면 어떻게 하죠...?🎉
    `,
    showTime: 5,
  });

  id.value += 1;
};
```

> 🚨 주의사항: 스토어의 프로퍼티와 메서드는 **절대** `destructuring`하지 마시길 바랍니다.  
> `Pinia`에서는 구조분해 할당 시, 반응성이 분리되어 더이상 추적하기 어렵습니다.  
> 이를 해결하려면 우회 방법으로 `computed`를 사용하는 것을 추천합니다.  
> ([다음 공식문서](https://pinia.vuejs.org/core-concepts/#using-the-store)를 참조하세요.)

---

## 토스트 삭제

시간 설정 후 추가를 하면, 다음 2가지를 통해 삭제가 가능합니다.

- 그냥 놔두셔도 걱정마세요. `showTime`만큼만 유지하고 사라집니다.
- 삭제 버튼을 클릭하세요. 언마운트 시 스케줄링을 삭제하며 사라집니다.

---

## 끝! 이것이 전부입니다.

그저 스토어와 토스트 디렉토리, 그리고 의존성 있는 컴포넌트와 에셋들만 복-붙하면, 쉽게 다룰 수 있는 토스트를 생성할 수 있습니다.

### 기타 자랑할 만한 기능

스토리북을 보면 되지만, 다음과 같은 기능을 갖고 있습니다.

- `toastStyle`: 블록처럼 쌓을 수도 있고, 중첩해서 보여줄 수도 있습니다.
- `isTransition`: 트랜지션 효과가 싫을 수 있습니다. 다음을 `false`로 설정해주세요.
- `direction`: 8방향으로 설정이 가능합니다. 형식은 `[[방향1]] [[방향2]]`로 띄어쓰기로 구분합니다. 만약 1개를 추가한다면 `[[방향1]]`만 쓰시면 됩니다.

> 트랜지션은 위 8방향을 모두 만족하며 생성됩니다. 🥰
